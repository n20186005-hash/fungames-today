<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tiny Town Defense - Fun Games Today</title>
    <style>
        /* ====================
           1. Global & Sidebar Styles
           ==================== */
        :root { --bg-color: #1a1a1a; --sidebar-bg: #2d2d2d; --text-color: #ffffff; --text-muted: #aaaaaa; --accent-color: #00d2ff; --card-bg: #333333; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); color: var(--text-color); display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: 240px; background-color: var(--sidebar-bg); padding: 20px; display: flex; flex-direction: column; position: fixed; height: 100%; left: 0; top: 0; overflow-y: auto; z-index: 1000; box-shadow: 2px 0 10px rgba(0,0,0,0.3); }
        .logo { font-size: 24px; font-weight: bold; color: var(--accent-color); margin-bottom: 30px; text-decoration: none; display: block; }
        .menu-group { margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #444; }
        .menu-group:last-child { border-bottom: none; }
        .menu-title { font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 10px; padding-left: 12px; }
        .menu-item { display: flex; align-items: center; gap: 10px; color: var(--text-muted); text-decoration: none; padding: 10px 12px; margin-bottom: 5px; border-radius: 8px; transition: 0.2s; font-weight: 500; font-size: 14px; }
        .menu-item:hover, .menu-item.active { background-color: rgba(0, 210, 255, 0.1); color: var(--accent-color); }
        .lang-select { margin-top: auto; padding: 10px; background: #333; color: white; border: 1px solid #555; border-radius: 5px; width: 100%; cursor: pointer; }

        /* ====================
           2. Game Page Specific Styles
           ==================== */
        .main-content { margin-left: 240px; padding: 30px; width: 100%; display: flex; flex-direction: column; align-items: center; }
        
        /* Game Container */
        .game-wrapper {
            width: 100%;
            max-width: 960px;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 210, 255, 0.1);
            margin-bottom: 20px;
            position: relative;
        }
        /* Point iframe to game file */
        iframe { width: 100%; height: 600px; border: none; display: block; }

        /* Toolbar */
        .game-toolbar {
            display: flex; justify-content: space-between; align-items: center;
            background: #252525; padding: 10px 20px; border-top: 1px solid #333;
        }
        .btn-fullscreen {
            background: transparent; border: 1px solid #555; color: white; padding: 5px 15px; border-radius: 5px; cursor: pointer; transition: 0.2s;
        }
        .btn-fullscreen:hover { background: var(--accent-color); border-color: var(--accent-color); color: black; }

        /* Layout Grid */
        .info-layout {
            display: grid;
            grid-template-columns: 1fr 320px; /* Left adaptive, Right fixed ad space */
            gap: 30px;
            width: 100%;
            max-width: 960px;
        }
        
        .game-details { background: var(--card-bg); padding: 25px; border-radius: 12px; }
        .ad-sidebar { display: flex; flex-direction: column; gap: 20px; }
        .ad-box { background: #222; border: 2px dashed #444; color: #666; display: flex; align-items: center; justify-content: center; font-size: 14px; border-radius: 8px; }
        .ad-300x250 { width: 300px; height: 250px; }
        .ad-300x600 { width: 300px; height: 600px; }

        h1 { margin-top: 0; color: var(--accent-color); }
        h3 { color: #fff; border-left: 4px solid var(--accent-color); padding-left: 10px; margin-top: 20px; }
        p, li { line-height: 1.6; color: #ccc; font-size: 15px; margin-bottom: 10px; }
        ul { padding-left: 20px; }

        /* ====================
           3. Interaction Module Styles (Rating + Comments)
           ==================== */
        .interaction-section {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
        }
        .rating-area { border-bottom: 1px solid #444; padding-bottom: 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
        .stars { font-size: 28px; cursor: pointer; color: #555; }
        .stars span { transition: color 0.2s; }
        .stars span:hover, .stars span.active { color: #FFD700; }
        
        .comment-form textarea {
            width: 100%; background: #222; border: 1px solid #444; color: white; padding: 15px; border-radius: 8px; resize: vertical; min-height: 80px; font-family: inherit; box-sizing: border-box;
        }
        .comment-form textarea:focus { outline: 1px solid var(--accent-color); }
        .btn-submit {
            background-color: var(--accent-color); color: #000; border: none; padding: 10px 25px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.2s;
        }
        .btn-submit:hover { background-color: #fff; }
        
        .comment-list { margin-top: 30px; }
        .comment-item { border-bottom: 1px solid #444; padding: 15px 0; display: flex; gap: 15px; }
        .avatar { width: 40px; height: 40px; background: #444; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; min-width: 40px;}
        .comment-content h4 { margin: 0 0 5px 0; color: #fff; font-size: 14px; }
        .comment-content p { margin: 0; color: #aaa; font-size: 14px; }
        .comment-date { font-size: 12px; color: #666; margin-left: 10px; }

        /* Mobile Adaptation */
        @media (max-width: 900px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 15px; }
            .info-layout { grid-template-columns: 1fr; }
            .ad-sidebar { align-items: center; }
            iframe { height: 400px; }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <a href="/" class="logo">ğŸ® FunGames</a>
        <div class="menu-group">
            <div class="menu-title" data-i18n="group_explore">Explore</div>
            <a href="/" class="menu-item" data-i18n="nav_home">ğŸ  Home</a>
            <a href="#" class="menu-item" data-i18n="nav_new">ğŸ†• New Games</a>
            <a href="#" class="menu-item" data-i18n="nav_hot">ğŸ”¥ Hot Games</a>
            <a href="#" class="menu-item" data-i18n="nav_recent">ğŸ•¹ï¸ Recently Played</a>
            <a href="#" class="menu-item" data-i18n="nav_rec">ğŸ‘ Recommended</a>
        </div>
        <div class="menu-group">
            <div class="menu-title" data-i18n="group_about">About</div>
            <a href="../news.html" class="menu-item" data-i18n="link_news">ğŸ“° Game News</a>
            <a href="../privacy.html" class="menu-item" data-i18n="link_privacy">ğŸ”’ Privacy Policy</a>
            <a href="../cookies.html" class="menu-item" data-i18n="link_cookies">ğŸª Cookie Policy</a>
            <a href="../terms.html" class="menu-item" data-i18n="link_terms">ğŸ“œ Terms of Use</a>
            <a href="../contact.html" class="menu-item" data-i18n="link_contact">ğŸ“© Contact Us</a>
        </div>
        <div style="margin-top: auto;">
            <div class="menu-title" data-i18n="label_lang">Language</div>
            <select class="lang-select" id="langSelector" onchange="switchLanguage(this.value)">
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="zh">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</option>
                <option value="jp">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                <option value="kr">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
            </select>
        </div>
    </div>

    <div class="main-content">
        
        <div class="game-wrapper">
            <iframe src="game.html" id="gameFrame" allowfullscreen></iframe>
            <div class="game-toolbar">
                <span style="color: #aaa; font-size: 14px;">FunGames.today</span>
                <button class="btn-fullscreen" onclick="toggleFullScreen()" data-i18n="btn_fullscreen">â›¶ Fullscreen</button>
            </div>
        </div>

<div class="info-layout">
            
            <div class="left-column">
                
                <div class="game-details">
                    <h1 data-i18n="game_title">Tiny Town Defense</h1>
                    
                    <div class="news-banner">
                        <span class="news-badge" data-i18n="tag_review">Review</span>
                        <a href="../articles/tiny-town.html" class="news-link" data-i18n="link_article_title">
                            Tiny Town Defense: Unadorned Power, Return to the Purest "Iron Triangle" Experience
                        </a>
                    </div>

                    <h3 data-i18n="label_desc">Description</h3>
                    <p class="lang-text en active">
                        <strong>Defend Your Home, Repel the Invasion!</strong><br><br>
                        Welcome to <strong>Tiny Town Defense</strong>! This is a retro-style game that blends action shooting with strategic tower defense. As the town's guardian, you must stand your ground, using weapons and defensive structures to hold back the monster legion descending from the skies. Protect the town's last line of defense!<br><br>
                        <strong>Game Features:</strong><br>
                        â€¢ <strong>Exciting Shooting Action:</strong> Control your hero to weave through the battlefield, raining fire upon incoming enemies.<br>
                        â€¢ <strong>Strategic Construction:</strong> Use gold to build Walls, Turrets, and Mines.<br>
                        â€¢ <strong>Random Power-ups:</strong> Grab supplies for Rapid Fire, Health Recovery, and Bonus Gold.<br>
                        â€¢ <strong>Endless Waves:</strong> Enemies get stronger. How long can you survive?
                    </p>
                    <p class="lang-text zh" style="display:none;">
                        <strong>ä¿å«ä½ çš„å®¶å›­ï¼Œå‡»é€€å…¥ä¾µï¼</strong><br><br>
                        æ¬¢è¿æ¥åˆ°<strong>Tiny Town Defense</strong>ï¼ˆè¿·ä½ å°é•‡ä¿å«æˆ˜ï¼‰ï¼é€™æ˜¯ä¸€æ¬¾èåˆäº†åŠ¨ä½œå°„å‡»ä¸ç­–ç•¥å¡”é˜²çš„å¤å¤é£æ ¼æ¸¸æˆã€‚ä½œä¸ºå°é•‡çš„å®ˆæŠ¤è€…ï¼Œä½ å¿…é¡»åšå®ˆé˜µåœ°ï¼Œåˆ©ç”¨æ­¦å™¨å’Œé˜²å¾¡å»ºç­‘é˜»æŒ¡ä»å¤©è€Œé™çš„æ€ªç‰©å†›å›¢ã€‚å®ˆæŠ¤å°é•‡çš„æœ€åä¸€é“é˜²çº¿ï¼<br><br>
                        <strong>æ¸¸æˆç‰¹è‰²ï¼š</strong><br>
                        â€¢ <strong>åˆºæ¿€çš„å°„å‡»åŠ¨ä½œï¼š</strong> æ§åˆ¶è‹±é›„ç©¿æ¢­æˆ˜åœºï¼Œå‘æ•Œäººå€¾æ³»ç«åŠ›ã€‚<br>
                        â€¢ <strong>ç­–ç•¥å»ºé€ ï¼š</strong> ä½¿ç”¨é‡‘å¸å»ºé€ å›´å¢™ã€ç‚®å¡”å’Œåœ°é›·ã€‚<br>
                        â€¢ <strong>éšæœºé“å…·ï¼š</strong> è·å–è¡¥ç»™ç®±ä»¥è·å¾—è¿å‘æ¨¡å¼ã€ç”Ÿå‘½æ¢å¤å’Œé¢å¤–é‡‘å¸ã€‚<br>
                        â€¢ <strong>æ— å°½æ³¢æ¬¡ï¼š</strong> æ•Œäººä¼šè¶Šæ¥è¶Šå¼ºã€‚ä½ èƒ½åšæŒå¤šä¹…ï¼Ÿ
                    </p>

                    <h3 data-i18n="label_controls">Controls</h3>
                    <ul class="lang-text en active">
                        <li><strong>Move:</strong> Arrow Keys or A / D</li>
                        <li><strong>Build:</strong> Press 1 (Wall), 2 (Turret), 3 (Mine), then Spacebar to build.</li>
                        <li><strong>Pause:</strong> Press P</li>
                        <li><strong>Goal:</strong> Watch your HP and manage your gold wisely!</li>
                    </ul>
                    <ul class="lang-text zh" style="display:none;">
                        <li><strong>ç§»åŠ¨ï¼š</strong> æ–¹å‘é”® æˆ– A / D</li>
                        <li><strong>å»ºé€ ï¼š</strong> æŒ‰ 1 (å›´å¢™), 2 (ç‚®å¡”), 3 (åœ°é›·)ï¼Œç„¶åæŒ‰ç©ºæ ¼é”®å»ºé€ ã€‚</li>
                        <li><strong>æš‚åœï¼š</strong> æŒ‰ P</li>
                        <li><strong>ç›®æ ‡ï¼š</strong> æ³¨æ„ä½ çš„ç”Ÿå‘½å€¼å¹¶æ˜æ™ºåœ°ç®¡ç†é‡‘å¸ï¼</li>
                    </ul>
                </div>

                <div class="interaction-section">
                    <h3 data-i18n="label_rate">Rate this game</h3>
                    <div class="rating-area">
                        <div class="stars" id="gameStars">
                            <span data-value="1">â˜…</span>
                            <span data-value="2">â˜…</span>
                            <span data-value="3">â˜…</span>
                            <span data-value="4">â˜…</span>
                            <span data-value="5">â˜…</span>
                        </div>
                        <span id="gameRatingText" style="color: var(--accent-color); font-size: 14px;"></span>
                    </div>

                    <h3 data-i18n="label_comment">Leave a Comment</h3>
                    <div class="comment-form">
                        <textarea id="commentInput" placeholder="Write your feedback here..."></textarea>
                        <button class="btn-submit" onclick="submitComment()" data-i18n="btn_submit">Post Comment</button>
                    </div>

                    <div class="comment-list" id="commentList">
                        <div class="comment-item"><div class="avatar">ğŸ°</div><div class="comment-content"><h4>DefenderPro <span class="comment-date">2 hours ago</span></h4><p data-i18n="fake_comment_1">The turrets are lifesavers in later waves!</p></div></div>
                        <div class="comment-item"><div class="avatar">ğŸ’£</div><div class="comment-content"><h4>BoomMaster <span class="comment-date">5 hours ago</span></h4><p data-i18n="fake_comment_2">Love using mines against the big groups.</p></div></div>
                        </div>
                </div>

            </div> 
            <div class="ad-sidebar">
                <div class="ad-box ad-300x250">AD SPACE (300x250)</div>
                <div class="ad-box ad-300x600">AD SPACE (300x600)</div>
            </div>

        </div>

    <script>
        // 1. Fullscreen Function
        function toggleFullScreen() {
            var iframe = document.getElementById("gameFrame");
            if (iframe.requestFullscreen) iframe.requestFullscreen();
            else if (iframe.mozRequestFullScreen) iframe.mozRequestFullScreen();
            else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
            else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
        }

        // 2. Rating Logic
        const stars = document.querySelectorAll('#gameStars span');
        const ratingText = document.getElementById('gameRatingText');
        
        stars.forEach(star => {
            star.addEventListener('mouseover', function() { highlightStars(this.dataset.value); });
            star.addEventListener('mouseout', function() { highlightStars(0); });
            star.addEventListener('click', function() {
                const val = this.dataset.value;
                highlightStars(val);
                stars.forEach(s => s.style.pointerEvents = 'none'); 
                
                const lang = localStorage.getItem('preferred_lang') || 'en';
                const thanks = translations[lang]['msg_thanks'] || "Thanks for rating!";
                ratingText.innerText = thanks + " (" + val + "/5)";
            });
        });

        function highlightStars(value) {
            stars.forEach(s => {
                if (s.dataset.value <= value) s.classList.add('active');
                else s.classList.remove('active');
            });
        }

        // 3. Comment Submission Logic
        function submitComment() {
            const input = document.getElementById('commentInput');
            const text = input.value.trim();
            const list = document.getElementById('commentList');
            const lang = localStorage.getItem('preferred_lang') || 'en';
            
            if (text === "") {
                alert(lang === 'zh' ? "è¯·è¾“å…¥å†…å®¹ï¼" : "Please write something!");
                return;
            }

            const newComment = document.createElement('div');
            newComment.className = 'comment-item';
            newComment.innerHTML = `
                <div class="avatar">ğŸ™‚</div>
                <div class="comment-content">
                    <h4>You <span class="comment-date">Just now</span></h4>
                    <p>${text}</p>
                </div>
            `;
            list.prepend(newComment);
            input.value = "";
        }

        // 4. Multi-language Configuration (Updated for Tiny Town Defense)
        const translations = {
            en: {
                group_explore: "Explore", nav_home: "ğŸ  Home", nav_new: "ğŸ†• New Games", nav_hot: "ğŸ”¥ Hot Games", nav_recent: "ğŸ•¹ï¸ Recently Played", nav_rec: "ğŸ‘ Recommended", group_about: "About", link_news: "ğŸ“° News", link_privacy: "ğŸ”’ Privacy", link_cookies: "ğŸª Cookies", link_terms: "ğŸ“œ Terms", link_contact: "ğŸ“© Contact", label_lang: "Language", 
                btn_fullscreen: "â›¶ Fullscreen",
                game_title: "Tiny Town Defense",
                label_desc: "Description",
                label_controls: "Controls",
                label_rate: "Rate this game",
                label_comment: "Leave a Comment",
                btn_submit: "Post Comment",
                msg_thanks: "Thanks for rating!",
                tag_review: "REVIEW",
                link_article_title: "Tiny Town Defense: Unadorned Power, Return to the Purest Strategy Experience",
                
                // 10 Fake Comments - English
                fake_comment_1: "The turrets are lifesavers in later waves!",
                fake_comment_2: "Love using mines against the big groups.",
                fake_comment_3: "Great retro graphics and sound effects.",
                fake_comment_4: "Don't forget to repair your walls!",
                fake_comment_5: "Managing gold is key. Don't spend it all at once.",
                fake_comment_6: "The rapid fire power-up is OP!",
                fake_comment_7: "Wave 10 is super hard. Any tips?",
                fake_comment_8: "Simple controls but deep strategy. 5/5.",
                fake_comment_9: "Best tower defense game on this site.",
                fake_comment_10: "Protect our town at all costs!"
            },
            zh: {
                group_explore: "æ¢ç´¢", nav_home: "ğŸ  ä¸»é¡µ", nav_new: "ğŸ†• æ–°æ¸¸æˆ", nav_hot: "ğŸ”¥ çƒ­é—¨æ¸¸æˆ", nav_recent: "ğŸ•¹ï¸ æœ€è¿‘ç©è¿‡", nav_rec: "ğŸ‘ æ¨èæ¸¸æˆ", group_about: "å…³äº", link_news: "ğŸ“° æ¸¸æˆèµ„è®¯", link_privacy: "ğŸ”’ éšç§æ”¿ç­–", link_cookies: "ğŸª Cookie æ”¿ç­–", link_terms: "ğŸ“œ ä½¿ç”¨æ¡æ¬¾", link_contact: "ğŸ“© è”ç³»æˆ‘ä»¬", label_lang: "è¯­è¨€ / Language", 
                btn_fullscreen: "â›¶ å…¨å±æ¨¡å¼",
                game_title: "è¿·ä½ å°é•‡ä¿å«æˆ˜",
                label_desc: "æ¸¸æˆä»‹ç»",
                label_controls: "æ“ä½œè¯´æ˜",
                label_rate: "ç»™æ¸¸æˆæ‰“åˆ†",
                label_comment: "å‘è¡¨è¯„è®º",
                btn_submit: "æäº¤è¯„è®º",
                msg_thanks: "æ„Ÿè°¢æ‚¨çš„è¯„åˆ†ï¼",
                tag_review: "æµ‹è¯„",
                link_article_title: " å°é•‡å®ˆå«æˆ˜ï¼šè´¨æœ´ä¹‹åŠ›ï¼Œå›å½’æœ€çº¯ç²¹çš„ç­–ç•¥ä½“éªŒ"

                // 10 Fake Comments - Chinese
                fake_comment_1: "ç‚®å¡”åœ¨åæœŸæ³¢æ¬¡ç®€ç›´æ˜¯æ•‘å‘½ç¨»è‰ï¼",
                fake_comment_2: "å–œæ¬¢ç”¨å„ç§åœ°é›·ç‚¸é£å¤§ç¾¤æ•Œäººã€‚",
                fake_comment_3: "å¾ˆæ£’çš„å¤å¤ç”»é£å’ŒéŸ³æ•ˆã€‚",
                fake_comment_4: "åˆ«å¿˜äº†ä¿®è¡¥ä½ çš„å›´å¢™ï¼",
                fake_comment_5: "ç®¡ç†é‡‘å¸æ˜¯å…³é”®ã€‚ä¸è¦ä¸€æ¬¡èŠ±å…‰ã€‚",
                fake_comment_6: "è¿å‘é“å…·å¤ªå¼ºäº†ï¼",
                fake_comment_7: "ç¬¬10æ³¢å¤ªéš¾äº†ã€‚æœ‰ä»€ä¹ˆæŠ€å·§å—ï¼Ÿ",
                fake_comment_8: "æ“ä½œç®€å•ä½†ç­–ç•¥å¾ˆæ·±ã€‚5åˆ†ã€‚",
                fake_comment_9: "è¿™ä¸ªç½‘ç«™ä¸Šæœ€å¥½çš„å¡”é˜²æ¸¸æˆã€‚",
                fake_comment_10: "ä¸æƒœä¸€åˆ‡ä»£ä»·ä¿å«æˆ‘ä»¬çš„å°é•‡ï¼"
            },
            jp: { game_title: "Tiny Town Defense", label_desc: "èª¬æ˜", label_controls: "æ“ä½œæ–¹æ³•", btn_fullscreen: "â›¶ å…¨ç”»é¢", label_rate: "è©•ä¾¡ã™ã‚‹", label_comment: "ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã™", btn_submit: "é€ä¿¡", msg_thanks: "è©•ä¾¡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼" },
            kr: { game_title: "íƒ€ìš´ ë””íœìŠ¤", label_desc: "ì„¤ëª…", label_controls: "ì¡°ì‘ë²•", btn_fullscreen: "â›¶ ì „ì²´ í™”ë©´", label_rate: "ê²Œì„ í‰ê°€", label_comment: "ëŒ“ê¸€ ë‚¨ê¸°ê¸°", btn_submit: "ê²Œì‹œ", msg_thanks: "í‰ê°€í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!" }
        };

        function switchLanguage(lang) {
            localStorage.setItem('preferred_lang', lang);
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                const dict = translations[lang] || translations['en'];
                if (dict[key]) el.innerText = dict[key];
            });

            document.querySelectorAll('.lang-text').forEach(el => el.style.display = 'none');
            const targets = document.querySelectorAll(`.lang-text.${lang}`);
            if(targets.length > 0) targets.forEach(el => el.style.display = 'block');
            else document.querySelectorAll(`.lang-text.en`).forEach(el => el.style.display = 'block');

            document.getElementById('langSelector').value = lang;
            
            const commentInput = document.getElementById('commentInput');
            if(lang === 'zh') commentInput.placeholder = "åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„è¯„è®º...";
            else commentInput.placeholder = "Write your feedback here...";
        }

        window.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('preferred_lang') || 'en';
            switchLanguage(savedLang);
        });
    </script>
</body>
</html>